<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>CityBeat - Log In</title>
  <link rel="stylesheet" href="login.css">
</head>
<body>
  <!-- header removed from login page as requested -->

  <main class="login-page">
    <div class="login-bg"></div>

    <div class="login-card">
      <h2>Welcome back!</h2>
      <p class="lead">We're so excited to see you again!</p>

      <form class="login-form" action="#" method="post">
  <label for="email">Email<span class="req">*</span></label>
        <input id="email" name="email" type="email" placeholder="Email" required>

  <label for="password">Password<span class="req">*</span></label>
        <input id="password" name="password" type="password" placeholder="Password" required>

        <div class="form-footer">
          <a class="forgot" href="#" id="forgot-link">Forgot your password?</a>
          <button class="btn-submit" type="submit">Log In</button>
        </div>

  <p class="register">Need an account? <a href="/logIn/register.html">Register</a></p>
      </form>
    </div>
  </main>

  <!-- Reset-password modal (hidden by default). We'll toggle with JS. -->
  <div id="reset-modal" class="reset-modal" aria-hidden="true" style="display:none;">
    <div class="reset-overlay"></div>
    <div class="reset-panel" role="dialog" aria-modal="true">
      <button class="reset-close" aria-label="Close">Ã—</button>
      <div class="reset-step reset-step-1">
        <form id="reset-form-1" novalidate>
          <h3>Reset your password</h3>
          <p class="desc">Enter the email associated with your account.</p>
          <label for="reset-email">Email<span class="req">*</span></label>
          <input id="reset-email" name="reset-email" type="email" placeholder="you@example.com" required>
          <div class="reset-actions"><button type="submit" class="reset-btn reset-btn-primary">Confirm</button></div>
        </form>
      </div>
      <div class="reset-step reset-step-2" style="display:none;">
        <form id="reset-form-2" novalidate>
          <h3>Choose a new password</h3>
          <p class="desc">Enter and confirm your new password.</p>
          <label for="new-password">New password<span class="req">*</span></label>
          <input id="new-password" name="new-password" type="password" placeholder="New password" required>
          <label for="confirm-password">Confirm password<span class="req">*</span></label>
          <input id="confirm-password" name="confirm-password" type="password" placeholder="Confirm password" required>
          <div class="reset-actions"><button type="submit" class="reset-btn reset-btn-primary">Confirm</button></div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // reset-password flow
    (function(){
      const forgot = document.getElementById('forgot-link');
      const modal = document.getElementById('reset-modal');
      const overlay = modal && modal.querySelector('.reset-overlay');
      const close = modal && modal.querySelector('.reset-close');
      const step1 = modal && modal.querySelector('.reset-step-1');
      const step2 = modal && modal.querySelector('.reset-step-2');
      const form1 = document.getElementById('reset-form-1');
      const form2 = document.getElementById('reset-form-2');

      function openModal(){ if(!modal) return; modal.style.display='flex'; modal.setAttribute('aria-hidden','false'); step1.style.display='block'; step2.style.display='none'; }
      function closeModal(){ if(!modal) return; modal.style.display='none'; modal.setAttribute('aria-hidden','true'); }

      if(forgot){ forgot.addEventListener('click', function(e){ e.preventDefault(); openModal(); }); }
      if(close){ close.addEventListener('click', closeModal); }
      if(overlay){ overlay.addEventListener('click', closeModal); }

      // use native form validation (reportValidity) so browser shows "Please fill out this field"
      if(form1){
        form1.addEventListener('submit', function(e){
          e.preventDefault();
          if(!form1.reportValidity()) return; // show native messages when invalid
          // proceed to step 2
          step1.style.display='none';
          step2.style.display='block';
          // focus first input of step2
          const p = document.getElementById('new-password'); p && p.focus();
        });
      }

      if(form2){
        form2.addEventListener('submit', function(e){
          e.preventDefault();
          // let browser show required-field messages first
          if(!form2.reportValidity()) return;
          const p1 = document.getElementById('new-password');
          const p2 = document.getElementById('confirm-password');
          if(p1.value !== p2.value){
            p2.setCustomValidity('Passwords do not match');
            p2.reportValidity();
            p2.setCustomValidity('');
            return;
          }
          // success, redirect to login page
          window.location.href = '/logIn/login.html';
        });
      }
    })();
  </script>
  <script>
    // mark user as logged in when login form is submitted (client-only demo)
    (function(){
      const loginForm = document.querySelector('.login-form');
      if(loginForm){
        loginForm.addEventListener('submit', function(e){
          // prevent default so we can set a flag and redirect
          // in a real app you'd verify credentials on the server
          e.preventDefault();
          localStorage.setItem('isLoggedIn','1');
          // redirect to main page folder (space encoded)
          window.location.href = '/main%20page/index.html';
        });
      }
    })();
  </script>
</body>
</html>